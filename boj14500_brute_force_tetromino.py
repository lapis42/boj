import sys
r = lambda: map(int, sys.stdin.readline().split())

dx = [[0, 0, 0, 0], [0, 1, 2, 3], [0, 0, 1, 1], [0, 1, 2, 2], [1, 0, 0, 0],
      [0, 0, 1, 2], [1, 1, 1, 0], [2, 2, 1, 0], [0, 0, 0, 1], [2, 1, 0, 0],
      [0, 1, 1, 1], [0, 1, 1, 2], [1, 1, 0, 0], [2, 1, 1, 0], [0, 0, 1, 1],
      [1, 1, 1, 0], [1, 0, 1, 2], [0, 0, 0, 1], [0, 1, 2, 1]]

dy = [[0, 1, 2, 3], [0, 0, 0, 0], [0, 1, 0, 1], [0, 0, 0, 1], [0, 0, 1, 2],
      [0, 1, 1, 1], [0, 1, 2, 2], [0, 1, 1, 1], [0, 1, 2, 2], [0, 0, 0, 1],
      [0, 0, 1, 2], [0, 0, 1, 1], [0, 1, 1, 2], [0, 0, 1, 1], [0, 1, 1, 2],
      [0, 1, 2, 1], [0, 1, 1, 1], [0, 1, 2, 1], [0, 0, 0, 1]]

n, m = r()
v = [list(r()) for _ in range(n)]

ans = 0
for i in range(n):
    for j in range(m):
        for k in range(19):
            temp = 0
            for l in range(4):
                x = i + dx[k][l]
                y = j + dy[k][l]
                if x < 0 or x >= n or y < 0 or y >= m:
                    break
                temp += v[x][y]
            ans = max(ans, temp)
print(ans)
